# 🎯 실시간 얼굴 매칭 시스템

OpenCV를 사용한 웹캠 기반 실시간 얼굴 인식 및 매칭 프로그램입니다.

## 📋 기능

- **실시간 얼굴 검출**: 웹캠을 통해 실시간으로 얼굴을 검출합니다
- **얼굴 매칭**: 미리 준비한 기준 얼굴 이미지와 실시간 비교합니다
- **시각적 피드백**: 매칭된 얼굴에 빨간색 테두리로 표시합니다
- **매칭 점수**: 실시간으로 매칭 정확도를 퍼센트로 표시합니다

## 🛠️ 요구사항

### 시스템 요구사항
- Linux/Ubuntu 환경
- C++17 지원 컴파일러
- 웹캠 (USB 카메라 또는 내장 카메라)

### 필수 라이브러리
```bash
sudo apt-get update
sudo apt-get install -y \
    libopencv-dev \
    cmake \
    build-essential \
    wget
```

## 🚀 설치 및 실행

### 1. 프로젝트 빌드
```bash
# 빌드 스크립트 실행
./build.sh
```

### 2. 얼굴 사진 준비
```bash
# images 폴더에 자신의 얼굴 사진 저장
# 예: ./images/my_face.jpg
```

### 3. 프로그램 실행
```bash
./face_matcher
```

## 📸 얼굴 사진 준비 가이드

### 좋은 기준 사진의 조건
- **정면 얼굴**: 카메라를 정면으로 바라보는 사진
- **적절한 조명**: 너무 밝거나 어두우지 않은 균등한 조명
- **선명한 화질**: 흐리지 않은 선명한 사진
- **적절한 크기**: 얼굴이 너무 작거나 크지 않게

### 권장 사진 사양
- 해상도: 300x300 이상
- 형식: JPG, PNG
- 얼굴 크기: 이미지의 30-70% 차지

## 🎮 사용법

### 프로그램 시작
1. 프로그램 실행 후 기준 얼굴 이미지 경로 입력
2. 매칭 임계값 설정 (선택사항, 기본값: 70%)
3. 웹캠 화면이 나타나면 얼굴을 카메라에 비춤

### 실행 중 조작
| 키 | 기능 |
|---|---|
| `ESC` 또는 `q` | 프로그램 종료 |
| `t` | 매칭 임계값 실시간 조정 |
| `s` | 현재 화면 스크린샷 저장 |

### 매칭 결과 해석
- **빨간색 테두리**: 매칭 성공 (임계값 이상)
- **노란색 테두리**: 얼굴 검출됨 (매칭 실패)
- **매칭 점수**: 실시간 유사도 퍼센트 표시

## 🔧 매개변수 조정

### 매칭 임계값
- **높은 값 (80-90%)**: 엄격한 매칭, 정확도 높음, 민감도 낮음
- **중간 값 (60-80%)**: 균형잡힌 성능 (권장)
- **낮은 값 (40-60%)**: 관대한 매칭, 민감도 높음, 오검출 가능

### 최적화 팁
- 조명이 일정한 환경에서 테스트
- 웹캠과 30-50cm 거리 유지
- 정면을 향하도록 자세 유지

## 🧠 알고리즘 설명

### 얼굴 검출
- **Haar Cascade Classifier** 사용
- OpenCV의 사전 훈련된 모델 활용
- 실시간 얼굴 영역 검출

### 매칭 알고리즘
두 가지 방법의 조합:

1. **템플릿 매칭 (60%)**
   - 정규화된 상관계수 매칭
   - 얼굴 구조적 유사성 비교

2. **히스토그램 비교 (40%)**
   - HSV 색상 히스토그램 분석
   - 색상 분포 유사성 측정

### 전처리 과정
- 크기 정규화 (150x150)
- CLAHE를 통한 조명 보정
- 히스토그램 균등화

## 📁 파일 구조

```
Project4/
├── main.cpp              # 메인 프로그램
├── face_matcher.h         # FaceMatcher 클래스 헤더
├── face_matcher.cpp       # FaceMatcher 클래스 구현
├── CMakeLists.txt         # CMake 설정
├── build.sh              # 빌드 스크립트
├── README.md             # 이 파일
├── images/               # 얼굴 이미지 폴더
│   └── sample_face.jpg   # 샘플 이미지
└── build/                # 빌드 파일들
```

## 🛟 문제 해결

### 빌드 오류
```bash
# OpenCV 재설치
sudo apt-get remove libopencv-dev
sudo apt-get install libopencv-dev

# 의존성 확인
pkg-config --modversion opencv4
```

### 웹캠 인식 실패
```bash
# 웹캠 장치 확인
ls /dev/video*

# 권한 확인
sudo chmod 666 /dev/video0
```

### 얼굴 검출 실패
- Haar cascade 파일이 다운로드되었는지 확인
- 조명 조건 개선
- 카메라 각도 조정

## 🎓 개발 정보

- **언어**: C++17
- **라이브러리**: OpenCV 4.x
- **빌드 시스템**: CMake
- **플랫폼**: Linux/Ubuntu

## 📈 성능 개선 방향

- 딥러닝 기반 얼굴 인식 적용 (dlib, face_recognition)
- 다중 얼굴 동시 매칭
- 얼굴 랜드마크 기반 정밀 매칭
- GPU 가속 처리

---

**🌟 즐거운 얼굴 매칭 테스트 되세요! 🌟**